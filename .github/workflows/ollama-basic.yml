name: Ollama AI Processing

on:
  push:
    branches: [ main ]
  workflow_dispatch:
jobs:
  ai-processing:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    - name: System information
      run: |
        echo "Runner OS: ${{ runner.os }}"
        echo "Available disk space:"
        df -h
        echo "Available memory:"
        free -h
        echo "CPU information:"
        nproc
    - name: Install Ollama
      run: |
        curl -fsSL https://ollama.com/install.sh | sh
    - name: Verify Ollama installation
      run: |
        ollama --version
        ollama list
    - name: Download AI model
      run: |
        echo "Downloading Llama 3.2 1B model..."
        ollama pull llama3.2:1b
        
    - name: Verify model availability
      run: |
        echo "Available models:"
        ollama list
        echo "Model download complete"
    - name: Execute AI query
      run: |
        echo "Processing AI prompt..."
        RESPONSE=$(ollama run llama3.2:1b "Explain what DevOps means in one sentence, focusing on automation and collaboration.")
        echo "AI Response:"
        echo "$RESPONSE"
